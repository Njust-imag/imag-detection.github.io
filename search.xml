<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>2022 科大讯飞农业赛道识别挑战赛</title>
      <link href="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/"/>
      <url>/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<h1 id="2022-科大讯飞农业赛道农作物病虫害识别挑战赛"><a href="#2022-科大讯飞农业赛道农作物病虫害识别挑战赛" class="headerlink" title="2022 科大讯飞农业赛道农作物病虫害识别挑战赛"></a><strong>2022 科大讯飞农业赛道农作物病虫害识别挑战赛</strong></h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>从2004年以来，我国每年中央一号文件都会聚焦“三农”问题，农业是最基础的产业，加快推进农业现代化是现实与历史的重大任务。在国民经济进入新常态的背景下，农业发展需要主动适应这一转变。近年来，农作物病虫害给我国带来了严重的粮食减产问题，因此农作物病虫害识别检测和防治处理的研究对农业生产有着重要意义。<br>团队于2022年获得科大讯飞农业赛道“基于可见光图像的柑橘花果梢识别挑战赛”和“辣椒病虫害图像识别挑战赛”挑战赛冠军。辣椒病虫害图像识别难度较大，涉及病虫害种类较多，通过肉眼观察、主观认知是很难去划分标准的。此外，训练和测试时可能会存在场景跨域情况，在一定程度上也会增加图像识别难度。<br>据相关文献显示，人类对此次竞赛中的农业病虫害的主观判断正确率可能只有60%，而我们的模型算法已经超过了人类的水平，达到70%以上，从识别准确率上来看，相当于我们的算法模型是可以减轻他们的工作量，甚至可以补足农业工作人员。在图片识别速度方面，我们的模型算法也达到了一个新高度。如果人类去识别一张图像，观察它的细节，可能需要2到3秒钟。对于我们的模型算法来说，能够做到1秒钟识别30张图片，接近60倍的速度，这也是非常大的突破。  </p><h2 id="1-背景知识"><a href="#1-背景知识" class="headerlink" title="1 背景知识"></a>1 背景知识</h2><p>中国是柑橘的重要原产地之一，柑橘资源丰富，优良品种繁多，并且柑橘是南方重要的经济作物之一。柑橘不同生育时期的措施、柑橘病虫害的防治直接或间接影响着柑橘产量。<br>春梢是一年中最重要的枝梢，保花坐果膨果需要大量的有机营养。春梢过少甚至不出梢时，就不能制造足够的营养供幼果生长。柑橘花期是柑橘结果的保证，柑橘在花期会大量开花，这样会消耗大量的养分，可能会导致树势生长不良，花期需要注重花的量，不能太少也不能太多，以保证后期柑橘果实的产量。花期应该注意补充好营养，来补充开花消耗的大量营养。<br>柑橘黄龙病(HLB)是柑橘产业的毁灭性病害，目前尚无公认有效的治疗方法，因此当前黄龙病防控“三板斧”是砍病树、杀木虱和用无病苗。针对当前两大“板斧”——砍病树和杀木虱，开展基于数据驱动的柑橘黄龙病智能且精准防控技术的研究。以“防治未病”为宗旨，开展柑橘黄龙病唯一传播媒介——柑橘木虱智能监测的研究。<br>基于此，希望对以柑橘新梢、花朵、花苞和青果进行识别检测；对木虱、黄龙病、果蝇等病虫害进行识别检测。  </p><h2 id="2-技术方案"><a href="#2-技术方案" class="headerlink" title="2 技术方案"></a>2 技术方案</h2><h3 id="2-1-数据分析与处理"><a href="#2-1-数据分析与处理" class="headerlink" title="2.1 数据分析与处理"></a>2.1 数据分析与处理</h3><p>柑橘图像有如下特点：（1）不同类别的数量不均衡（2）花苞和花目标图像较小（3）背景图像复杂，有明显的光照变化（4）有明显的目标遮挡情况。如图2-1和2-2所示。共计2万余张图像。  </p><p><img src="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/2-1.png" alt="2-1 柑橘病害图像">  </p><p><img src="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/2-2.png" alt="2-2 柑橘新梢、花朵、花苞和青果图像">  </p><p>为拓展图像数量，缩小类别差距，进行数据增强。主要使用水平翻转、图像随机旋转90度、随机对比度、随机光照变化、网格擦除、bbox框抖动和mixup图像混合增强等增强手段。如图2-3所示。  </p><p><img src="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/2-3.png" alt="2-3 数据增强结果"></p><p>统计图像GT数目和各类别bbox数目，如图2-4和2-5所示。3类别的数目分布较多。bbox宽高比主要为1:1。  </p><p><img src="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/2-4.png" alt="2-4 GT数目">  </p><p><img src="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/2-5.png" alt="2-5 bbox数目">  </p><h3 id="2-2-技术方案与算法分析"><a href="#2-2-技术方案与算法分析" class="headerlink" title="2.2 技术方案与算法分析"></a>2.2 技术方案与算法分析</h3><p>由于图像尺度过大，在单卡有限资源下，扩大batchsize进行训练。使用Cross-Batch Memory(XBM)，如图2-6所示。将之前batch的样本的特征保存到队列中，保持队列长度一定，与当前batch的样本共同计算loss。该方法用较少的代价获得大量样本对，从而有助于难样本的挖掘，提升模型学习效果。  </p><p><img src="/2023/03/31/2022%E7%A7%91%E5%A4%A7%E8%AE%AF%E9%A3%9E%E5%86%9C%E4%B8%9A%E8%B5%9B%E9%81%93%E8%AF%86%E5%88%AB%E6%8C%91%E6%88%98%E8%B5%9B/2-6.png" alt="2-6 Cross-Batch Memory(XBM)">  </p><p>此外，使用FP32+FP16混合精度对模型进行训练，提高训练效率，减少显存使用。学习率预热+两阶段学习率衰减，加入学习率预热机制，保持分布的平稳和模型深层的稳定性。两阶段学习率衰减，使模型收敛更优。使用Swa随机权重平均融合。正常训练后，再训练一定的epoch，然后对这些epoch进行参数权重融合。  </p><h2 id="3-性能和可视化展示"><a href="#3-性能和可视化展示" class="headerlink" title="3 性能和可视化展示"></a>3 性能和可视化展示</h2><p>基于Res2net骨干网的实验结果如表3-1所示。由消融实验可以看出，我们使用的每一项数据增强都对提升结果有益。  </p><p>表3-1 基于Res2net骨干网的实验结果 </p><table><thead><tr><th align="center">Baseline</th><th align="center">mixup</th><th align="center">RandomFlip</th><th align="center">Bbox抖动</th><th align="center">旋转90度</th><th align="center">SWA</th><th align="center">结果</th></tr></thead><tbody><tr><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">80.154</td></tr><tr><td align="center"></td><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">81.569</td></tr><tr><td align="center"></td><td align="center"></td><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">81.746</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center">82.184</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">√</td><td align="center"></td><td align="center">82.387</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">√</td><td align="center">82.482</td></tr></tbody></table><p>不同骨干网的实验如表3-2所示。数据在CB Swin系列模型上表现良好，Res2Net、ResNeSt上次之，ConvneXt最末。为了综合考虑所有模型的结果，提升模型准确率，使用WBF对6个骨干网对应的结果进行融合，得到85.265的结果。  </p><p>表3-2 不同骨干网的实验结果  </p><table><thead><tr><th align="center">Baseline</th><th align="center">mixup</th></tr></thead><tbody><tr><td align="center">Res2Net</td><td align="center">82.482</td></tr><tr><td align="center">ResNeSt</td><td align="center">81.890</td></tr><tr><td align="center">CB Swin-small</td><td align="center">83.711</td></tr><tr><td align="center">CB Swin-base</td><td align="center">83.407</td></tr><tr><td align="center">CB Swin-large</td><td align="center">83.987</td></tr><tr><td align="center">ConvneXt small</td><td align="center">80.692</td></tr><tr><td align="center">融合（WBF）</td><td align="center">85.265</td></tr></tbody></table><p>不同trick所带来的提升如表3-3所示。  </p><p>表3-3 不同trick所带来的提升  </p><table><thead><tr><th align="center">编号</th><th align="center">Backbone</th><th align="center">Augments</th><th align="center">SGN</th><th align="center">MFDUM</th><th align="center">TTA</th><th align="center">验证得分</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">ResNetibnb101</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">53.69</td></tr><tr><td align="center">1</td><td align="center">ResNetibnb101</td><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">54.65</td></tr><tr><td align="center">2</td><td align="center">ResNetibnb101</td><td align="center">√</td><td align="center">√</td><td align="center"></td><td align="center"></td><td align="center">55.02</td></tr><tr><td align="center">3</td><td align="center">ResNetibnb101</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center"></td><td align="center">56.44</td></tr><tr><td align="center">4</td><td align="center">ResNetibnb101</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">58.27</td></tr><tr><td align="center">5</td><td align="center">SeNetibna50</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">58.46</td></tr><tr><td align="center">6</td><td align="center">ResNextibna101</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">57.02</td></tr><tr><td align="center">7</td><td align="center">Denseibna169</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">√</td><td align="center">57.49</td></tr></tbody></table><p>最终线上排行榜结果如表3-4所示。  </p><p>3-4 排名结果  </p><table><thead><tr><th align="center">队伍名</th><th align="center">成绩</th></tr></thead><tbody><tr><td align="center">乘风破浪的炼丹师(ours)</td><td align="center">85.265</td></tr><tr><td align="center">这就很秃然</td><td align="center">85.037</td></tr><tr><td align="center">Never</td><td align="center">84.912</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 物体识别 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 农作物病虫害识别检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022 ICME小样本商标检测挑战赛</title>
      <link href="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/"/>
      <url>/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="2022-ICME小样本商标检测挑战赛"><a href="#2022-ICME小样本商标检测挑战赛" class="headerlink" title="2022 ICME小样本商标检测挑战赛"></a><strong>2022 ICME小样本商标检测挑战赛</strong></h1><hr><h2 id="赛题分析"><a href="#赛题分析" class="headerlink" title="赛题分析"></a><strong>赛题分析</strong></h2><h3 id="任务："><a href="#任务：" class="headerlink" title="任务："></a><strong>任务：</strong></h3><p>利用少量有标注的训练样本，检测出商标的位置和类别。</p><h3 id="数据简介："><a href="#数据简介：" class="headerlink" title="数据简介："></a><strong>数据简介：</strong></h3><p>训练集合：共3500张训练图片，100类商品品牌logo，7千多个实例。初赛50类，每类50张训练图片；复赛50类，每类20张训练图片。</p><h3 id="评价指标："><a href="#评价指标：" class="headerlink" title="评价指标："></a><strong>评价指标：</strong></h3><p>$mAP(Iou&#x3D;.50:.05:95)$</p><h3 id="预训练模型："><a href="#预训练模型：" class="headerlink" title="预训练模型："></a><strong>预训练模型：</strong></h3><p>ImageNet 1K</p><h3 id="难点"><a href="#难点" class="headerlink" title="难点"></a><strong>难点</strong></h3><ol><li>小目标<br><em>解决方案：</em> <ol><li>高分辨率</li><li>Global Context</li></ol></li><li>类间差异大<br><em>解决方案：</em><ol><li>数据增强</li><li>大模型</li></ol></li></ol><hr><h2 id="方案介绍"><a href="#方案介绍" class="headerlink" title="方案介绍"></a><strong>方案介绍</strong></h2><h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a><strong>框架</strong></h3><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_1.png" alt="img_1"></p><h3 id="数据端：Copy-Paste-amp-Mixup"><a href="#数据端：Copy-Paste-amp-Mixup" class="headerlink" title="数据端：Copy-Paste &amp; Mixup"></a><strong>数据端：Copy-Paste &amp; Mixup</strong></h3><h4 id="Copy-Paste："><a href="#Copy-Paste：" class="headerlink" title="Copy-Paste："></a><strong>Copy-Paste：</strong></h4><p>如果一张图像内的 bbox 数量少于 6，则随机复制粘贴部分 bbox<br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_2.png" alt="img_2"></p><h4 id="Mixup："><a href="#Mixup：" class="headerlink" title="Mixup："></a><strong>Mixup：</strong></h4><p>以 0.5 的透明度混合两张图<br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_3.png" alt="img_3"></p><h3 id="数据端：Multi-Scale"><a href="#数据端：Multi-Scale" class="headerlink" title="数据端：Multi-Scale"></a><strong>数据端：Multi-Scale</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>(</span><br><span class="line">    <span class="built_in">type</span>=<span class="string">&#x27;AutoAugment&#x27;</span>,</span><br><span class="line">    policies=[[</span><br><span class="line">        <span class="built_in">dict</span>(</span><br><span class="line">            <span class="built_in">type</span>=<span class="string">&#x27;Resize&#x27;</span>,</span><br><span class="line">            img_scale=[(<span class="built_in">int</span>(<span class="number">32</span> * i), <span class="number">2666</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">65</span>)],</span><br><span class="line">            multiscale_mode=<span class="string">&#x27;value&#x27;</span>, override=<span class="literal">True</span>, keep_ratio=<span class="literal">True</span>)],</span><br><span class="line">        [</span><br><span class="line">            <span class="built_in">dict</span>(</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&#x27;Resize&#x27;</span>,</span><br><span class="line">                img_scale=[(<span class="number">1200</span>, <span class="number">3999</span>), (<span class="number">2400</span>, <span class="number">3999</span>)],</span><br><span class="line">                multiscale_mode=<span class="string">&#x27;range&#x27;</span>, override=<span class="literal">True</span>, keep_ratio=<span class="literal">True</span>),</span><br><span class="line">            <span class="built_in">dict</span>(</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&#x27;RandowCrop&#x27;</span>,</span><br><span class="line">                crop_type=<span class="string">&#x27;absolute_range&#x27;</span>,</span><br><span class="line">                crop_size=(<span class="number">1200</span>, <span class="number">1333</span>), allow_negative_crop=<span class="literal">True</span>),</span><br><span class="line">            <span class="built_in">dict</span>(</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&#x27;Resize&#x27;</span>,</span><br><span class="line">                img_scale=[(<span class="built_in">int</span>(<span class="number">32</span> * i), <span class="number">2666</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">32</span>, <span class="number">65</span>)],</span><br><span class="line">                multiscale_mode=<span class="string">&#x27;value&#x27;</span>, override=<span class="literal">True</span>, keep_ratio=<span class="literal">True</span>)]]),</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">test_pipelin = [</span><br><span class="line">    <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;LoadImageFromFile&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(</span><br><span class="line">        <span class="built_in">type</span>=<span class="string">&#x27;MultiScaleFlipAug&#x27;</span>,</span><br><span class="line">        img_scale=[(<span class="number">2666</span>, <span class="number">1216</span> + i * <span class="number">96</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">15</span>)],</span><br><span class="line">        flip=<span class="literal">False</span>,</span><br><span class="line">        transforms=[</span><br><span class="line">            <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;Resize&#x27;</span>, keep_ratio=<span class="literal">True</span>),</span><br><span class="line">            <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;RandomFlip&#x27;</span>),</span><br><span class="line">            <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;Normalize&#x27;</span>, **img_norm_cfg),</span><br><span class="line">            <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;Pad&#x27;</span>, size_divisor=<span class="number">32</span>),</span><br><span class="line">            <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;ImageToTensor&#x27;</span>, keys=[<span class="string">&#x27;img&#x27;</span>]),</span><br><span class="line">            <span class="built_in">dict</span>(<span class="built_in">type</span>=<span class="string">&#x27;Collect&#x27;</span>, keys=[<span class="string">&#x27;img&#x27;</span>]),</span><br><span class="line">        ])</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="数据端：初赛数据"><a href="#数据端：初赛数据" class="headerlink" title="数据端：初赛数据"></a><strong>数据端：初赛数据</strong></h3><ol><li>预训练 100 epoch + 12 epoch</li><li>将初赛训练集中与复赛数据中相同的三类图像加入训练 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat_id_map = &#123;</span><br><span class="line">    <span class="number">33</span> Diadora/迪亚多纳  :  <span class="number">33</span> Diadora/迪亚多纳 ,</span><br><span class="line">    <span class="number">26</span> BOY LONDON       :  <span class="number">31</span> BOY LONDON,</span><br><span class="line">    <span class="number">23</span> JORDAN           :  <span class="number">14</span> Nike/耐克</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="模型端："><a href="#模型端：" class="headerlink" title="模型端："></a><strong>模型端：</strong></h3><h4 id="Backbone-amp-Neck-ConvNeXt-amp-RFP"><a href="#Backbone-amp-Neck-ConvNeXt-amp-RFP" class="headerlink" title="Backbone &amp; Neck: ConvNeXt &amp; RFP"></a><strong>Backbone &amp; Neck: ConvNeXt &amp; RFP</strong></h4><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_4.png" alt="img_4"><br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_5.png" alt="img_5"></p><h4 id="RPN-Head"><a href="#RPN-Head" class="headerlink" title="RPN Head"></a><strong>RPN Head</strong></h4><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_6.png" alt="img_6"></p><h4 id="Roi-Head-Double-Head-Cascade-Roi-Head"><a href="#Roi-Head-Double-Head-Cascade-Roi-Head" class="headerlink" title="Roi Head: Double Head Cascade Roi Head"></a><strong>Roi Head: Double Head Cascade Roi Head</strong></h4><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_7.png" alt="img_7"><br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_8.png" alt="img_8"><br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_9.png" alt="img_9"></p><h4 id="Roi-Head-Global-Context"><a href="#Roi-Head-Global-Context" class="headerlink" title="Roi Head: + Global Context"></a><strong>Roi Head: + Global Context</strong></h4><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_10.png" alt="img_10"></p><h3 id="SWA"><a href="#SWA" class="headerlink" title="SWA"></a><strong>SWA</strong></h3><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_11.png" alt="img_11"><br><strong>后处理：</strong> 将 score 最高的类别认为是该图的类别，将不同类别的 score * 0.001<br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_12.png" alt="img_12"><br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_13.png" alt="img_13"></p><h2 id="比赛总结"><a href="#比赛总结" class="headerlink" title="比赛总结"></a><strong>比赛总结</strong></h2><ul><li>针对小目标：<br>  随机裁剪 + 多尺度训练,Global Context</li><li>针对小样本和类间差异大：<br>  大量数据增强 + 大模型<ol><li>Copy-Paste, Mixup, AutoAugment V2</li><li>ConvNeXt-Base + RFP</li></ol></li><li>泛化能力：<br>  SWA</li><li>数据先验：<br>  后处理</li></ul><p><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_14.png" alt="img_14"><br><img src="/2023/03/17/%E5%A4%A9%E6%B1%A0%E5%B0%8F%E6%A0%B7%E6%9C%AC%E6%A3%80%E6%B5%8B/img_15.png" alt="img_15"></p>]]></content>
      
      
      <categories>
          
          <category> 商标检测 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小样本目标检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>“华为云-东吴杯”数字化转型创新应用大赛</title>
      <link href="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/"/>
      <url>/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<p><strong>2021 “华为云-东吴杯”数字化转型创新应用大赛 汽车零部件：轴承&#x2F;摇把&#x2F;火花塞</strong></p><hr><h1 id="基于工业相机成像的汽车零部件缺陷检测"><a href="#基于工业相机成像的汽车零部件缺陷检测" class="headerlink" title="基于工业相机成像的汽车零部件缺陷检测"></a>基于工业相机成像的汽车零部件缺陷检测</h1><p>团队名称：乘风破浪的炼丹师<br>答辩人：  沈飞</p><hr><h2 id="赛题背景"><a href="#赛题背景" class="headerlink" title="赛题背景"></a>赛题背景</h2><p><strong>汽车工业</strong>是<strong>支持我国实体经济发展</strong>的关键产业，汽车零部件的质量是整车质量的基础。然而目前<strong>人工检测</strong>的方式不仅存在<strong>效率低</strong>下，还可能由于<br><strong>人工疲劳</strong>造成缺陷零部件流入行业下游，造成<strong>潜在的安全风险</strong>。因此，为了提高生产效率发挥人工智能的优势，我们需要研发一种<strong>高精度的汽车零部件缺<br>检测算法</strong>。<br>如图为本次比赛提供的<strong>3种常见汽车零部件：轴承、摇把和火花塞</strong>。<br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_1.png" alt="img_1.png"><br> 每种零部件都分别定义了几类缺陷：  </p><ol><li><strong>轴承：</strong> 连接处缺陷、直角边缺陷、空洞缺陷、毛刺；</li><li><strong>摇把：</strong> 颜色缺陷、划痕缺陷、磨损缺陷；</li><li><strong>火花塞：</strong> 垂直度问题、拔丝异常、间距缺陷。</li></ol><h3 id="评价指标"><a href="#评价指标" class="headerlink" title="评价指标"></a>评价指标</h3><p>Mean AveragePrecision（mAP）和MacroAccuracy（ACC）<br>总得分：$score&#x3D;\alpha<em>mAP+\beta</em>ACC$<br>$ACC&#x3D;\frac{\sum_{i&#x3D;1}^{N} TP_{i}}{N}$<br>$TP&#x3D;\begin{cases} 1,&amp; \sum_{d&#x3D;1}^{D}(pred_{label,d}&#x3D;&#x3D;gt_{label,d}&amp;&amp;IOU(pred_{bbox,d},gt_{bbbox,d})\geq\sigma&#x3D;&#x3D;D) \ 0, &amp; \text{else} \end{cases}$  </p><ul><li>其中，mAP只要计算<strong>mAP@50</strong>，ACC是指每张图片完全预测正确的准确率。</li><li><strong>模型限制大小600M</strong>，在ModelArts CPU推理端时长<strong>不能超过3小时</strong></li></ul><hr><h2 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h2><h3 id="3种汽车零部件数据各有特点："><a href="#3种汽车零部件数据各有特点：" class="headerlink" title="3种汽车零部件数据各有特点："></a><strong>3种汽车零部件数据各有特点：</strong></h3><h4 id="轴承："><a href="#轴承：" class="headerlink" title="轴承："></a><strong>轴承：</strong></h4><ol><li>轴承图像只存在左右翻转，占据图像面积较大</li><li>轴承头朝向左边的尺度范围在（1200-1300,800-900）<br>轴承头朝向右边的尺度范围在（1900-2200，1500-1800）</li><li>有明显的光照变化</li><li>有明显的角度旋转变化（-30度~30度左右）<br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_2.png" alt="img_2.png"></li></ol><h4 id="摇把："><a href="#摇把：" class="headerlink" title="摇把："></a><strong>摇把：</strong></h4><ol><li>图像存在左右翻转、90度旋转、垂直翻转</li><li>尺度范围较大，普遍在（4000, 3000）以上</li><li>瑕疵存在小目标现象（集中在颜色和磨损）</li><li>-45度~45度旋转图像较多<br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_3.png" alt="img_3.png"></li></ol><h4 id="火花塞："><a href="#火花塞：" class="headerlink" title="火花塞："></a><strong>火花塞：</strong></h4><ol><li>图像角度多变</li><li>尺度范围较大，普遍在（4000, 3000）以上</li><li>由于接线螺母和侧电极唯一，导致间距和垂直度缺陷也唯一</li><li>火花塞多集中在图像中心区域<br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_4.png" alt="img_4.png"></li></ol><h3 id="数据统计-–-3类零部件10种特定缺陷"><a href="#数据统计-–-3类零部件10种特定缺陷" class="headerlink" title="数据统计  –  3类零部件10种特定缺陷"></a><strong>数据统计  –  <em>3类零部件10种特定缺陷</em></strong></h3><p><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_5.png" alt="img_5.png"></p><ul><li><strong>GT框：整体上 <em>类别不平衡_，_单类的瑕疵_上轴承和火花塞类别_也不平衡</em></strong><br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_6.png" alt="img_6.png"></li></ul><h3 id="数据预处理：离线增强和在线增强"><a href="#数据预处理：离线增强和在线增强" class="headerlink" title="数据预处理：离线增强和在线增强"></a><strong>数据预处理：<em>离线增强和在线增强</em></strong></h3><ul><li><strong>离线增强：</strong> 水平翻转、垂直翻转(不包括轴承)、随机旋转90度（不包括轴承）、随机旋转 {轴承（±30度）, 摇把（±45）}、随机对比度（只针对轴承）、随机光照（只针对轴承）， 随机周围裁剪（仅针对火花塞)  <ul><li>尺度大小：<strong>分别在数据统计_范围内_进行_缩放_</strong></li><li><strong>3大类1张图像_随机策略，变成3张多尺度的图像_</strong><br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_7.png" alt="img_7.png"></li></ul></li><li>在线增强包括：<strong>Bbox-Jitter、 grid mask、mix up</strong><br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_8.png" alt="img_8.png"></li></ul><h2 id="模型设计"><a href="#模型设计" class="headerlink" title="模型设计"></a>模型设计</h2><p><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_9.png" alt="img_9.png"></p><ul><li>将<strong>自注意力限制为不重叠的局部窗口</strong>，同时允许<strong>跨窗口连接</strong>，移位的窗口方案带来了<strong>更高的效率</strong>。相对于图像大小具有线性计算复杂性。<br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_10.png" alt="img_10.png"></li><li><strong>级联3个RCNN</strong>，不断<strong>提高IoU阈值</strong>，对产生的proposal更好地进行回归。<br><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_11.png" alt="img_11.png"></li><li>Double-Head: 分别从<strong>空间和通道上</strong>进行压缩处理，<strong>减少空间上信息的损失</strong>，<strong>提高分类的得分</strong>。</li></ul><h3 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h3><ol><li><p>Anchor ratio 选择 0.2, 0.5, 1.0, 2.0, 4.0,  6.0；</p></li><li><p>Warm up 热启动，SGD优化器；</p></li><li><p>Label smooth 平滑交叉熵；</p></li><li><p>5折交叉验证对火花塞标注错误重新标注；</p></li><li><p>Swa 随机权重平均；</p><ul><li>正常训练后，再训练一定的epoch，然后对这些epoch进行融合；</li><li>此外，对3次随机离线生成的图像得到的模型再进行二次进行融合。</li></ul><p> <strong>在复赛阶段</strong>，由于接线螺母和侧电极唯一，导致间距和垂直度缺陷也唯一，因此只保留最高置信度得分的垂直度和间距缺陷。</p></li></ol><h2 id="线上成绩"><a href="#线上成绩" class="headerlink" title="线上成绩"></a>线上成绩</h2><p><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_12.png" alt="img_12.png"></p><ul><li>尝试不同的策略，性能有显著的增加，尤其针对<strong>特定大类做旋转，效果明显。</strong></li></ul><p><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_13.png" alt="img_13.png"></p><ul><li>采用相同的策略，更换骨干网，初赛线上成绩达到0.6329，排名<strong>初赛第一</strong></li></ul><p><img src="/2023/03/17/%E5%9F%BA%E4%BA%8E%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA%E6%88%90%E5%83%8F%E7%9A%84%E6%B1%BD%E8%BD%A6%E9%9B%B6%E9%83%A8%E4%BB%B6%E7%BC%BA%E9%99%B7%E6%A3%80%E6%B5%8B/img_14.png" alt="img_14.png"><br><strong>复赛成绩最终排名线上第二</strong><br><strong>本实验模型不Work的方法</strong></p><ul><li><strong>Anchor scale 增加尺度</strong></li><li><strong>Cascade IOU 阈值调整</strong></li><li><strong>Global context block ,全局上下文信息</strong></li><li><strong>FPN 替换ACFPN</strong></li><li><strong>Loss 替换</strong></li></ul><h2 id="总结与展望"><a href="#总结与展望" class="headerlink" title="总结与展望"></a>总结与展望</h2><h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结：</strong></h3><ol><li>通过对3种大类图像分析，结合类别特点，进行<strong>指定的数据增强，有效的提高了数据的丰富性；</strong></li><li>通过对类别内的不同缺陷分析，5折交叉验证来<strong>预测修正一些错误标签</strong>。对火花塞类别进行<strong>二次筛选</strong>，<strong>只保留最高置信度垂直度和间距缺陷；</strong></li><li>通过分析发现轴承的毛刺和直角边缺陷很难分类准确，提出<strong>Double Head 保留空间信息来提高轴承的分类准确率。</strong></li></ol><h3 id="展望："><a href="#展望：" class="headerlink" title="展望："></a><strong>展望：</strong></h3><ol><li>本次实验都是基于训练数据和测试数据的<strong>同源一致性</strong>，对于<strong>业务上采集图像背景环境</strong>没有过多的考虑；</li><li>在<strong>速度上欠缺过多的考虑</strong>，二阶段的检测器不清楚是否能满足实际场景需求。后期可能还要做TensorRT，<strong>模型压缩和量化</strong>；</li><li><strong>希望可以在本次大赛中，多与专家和选手们进行交流。</strong></li></ol>]]></content>
      
      
      <categories>
          
          <category> 缺陷检测 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 汽车零部件缺陷检测 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
